{"version":3,"file":"perfect-scrollbar.component.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Subject } from 'rxjs/Subject';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { Component, ViewEncapsulation,\n  OnInit, OnDestroy, DoCheck, Input, Output,\n  ViewChild, EventEmitter, HostBinding, HostListener,\n  ElementRef, ChangeDetectorRef } from '@angular/core';\n\nimport { PerfectScrollbarDirective } from './perfect-scrollbar.directive';\nimport { PerfectScrollbarConfigInterface } from './perfect-scrollbar.interfaces';\n\n@Component({\n  selector: 'perfect-scrollbar',\n  exportAs: 'ngxPerfectScrollbar',\n  templateUrl: './lib/perfect-scrollbar.component.html',\n  styleUrls: [ './lib/perfect-scrollbar.component.css' ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class PerfectScrollbarComponent implements OnInit, OnDestroy, DoCheck {\n  public states: any = {};\n\n  public indicatorX: boolean = false;\n  public indicatorY: boolean = false;\n\n  public interaction: boolean = false;\n\n  private stateTimeout: number = null;\n\n  private stateSub: Subscription = null;\n\n  private scrollPositionX: number = null;\n  private scrollPositionY: number = null;\n\n  private scrollDirectionX: number = null;\n  private scrollDirectionY: number = null;\n\n  private usePropagationX: boolean = false;\n  private usePropagationY: boolean = false;\n\n  private allowPropagationX: boolean = false;\n  private allowPropagationY: boolean = false;\n\n  private stateUpdate: Subject<string> = new Subject();\n\n  @Input() disabled: boolean = false;\n\n  @Input() usePSClass: boolean = true;\n\n  @HostBinding('class.ps-show-limits')\n  @Input() autoPropagation: boolean = false;\n\n  @HostBinding('class.ps-show-active')\n  @Input() scrollIndicators: boolean = false;\n\n  @Input() config: PerfectScrollbarConfigInterface;\n\n  @ViewChild(PerfectScrollbarDirective) directiveRef: PerfectScrollbarDirective;\n\n  @Output('psScrollY'        ) PS_SCROLL_Y            = new EventEmitter<any>();\n  @Output('psScrollX'        ) PS_SCROLL_X            = new EventEmitter<any>();\n\n  @Output('psScrollUp'       ) PS_SCROLL_UP           = new EventEmitter<any>();\n  @Output('psScrollDown'     ) PS_SCROLL_DOWN         = new EventEmitter<any>();\n  @Output('psScrollLeft'     ) PS_SCROLL_LEFT         = new EventEmitter<any>();\n  @Output('psScrollRight'    ) PS_SCROLL_RIGHT        = new EventEmitter<any>();\n\n  @Output('psYReachEnd'      ) PS_Y_REACH_END         = new EventEmitter<any>();\n  @Output('psYReachStart'    ) PS_Y_REACH_START       = new EventEmitter<any>();\n  @Output('psXReachEnd'      ) PS_X_REACH_END         = new EventEmitter<any>();\n  @Output('psXReachStart'    ) PS_X_REACH_START       = new EventEmitter<any>();\n\n  constructor(private cdRef: ChangeDetectorRef, private elementRef: ElementRef) {}\n\n  ngOnInit() {\n    this.stateSub = this.stateUpdate\n      .pipe(\n        distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\n      )\n      .subscribe((state: string) => {\n        if (this.stateTimeout) {\n          window.clearTimeout(this.stateTimeout);\n\n          this.stateTimeout = null;\n        }\n\n        if (state === 'x' || state === 'y') {\n          this.interaction = false;\n\n          if (state === 'x') {\n            this.indicatorX = false;\n\n            this.states.left = false;\n            this.states.right = false;\n\n            if (this.autoPropagation && this.usePropagationX) {\n              this.allowPropagationX = false;\n            }\n          } else if (state === 'y') {\n            this.indicatorY = false;\n\n            this.states.top = false;\n            this.states.bottom = false;\n\n            if (this.autoPropagation && this.usePropagationY) {\n              this.allowPropagationY = false;\n            }\n          }\n        } else {\n          if (state === 'left' || state === 'right') {\n            this.states.left = false;\n            this.states.right = false;\n\n            this.states[state] = true;\n\n            if (this.autoPropagation && this.usePropagationX) {\n              this.indicatorX = true;\n            }\n          } else if (state === 'top' || state === 'bottom') {\n            this.states.top = false;\n            this.states.bottom = false;\n\n            this.states[state] = true;\n\n            if (this.autoPropagation && this.usePropagationY) {\n              this.indicatorY = true;\n            }\n          }\n\n          if (this.autoPropagation) {\n            this.stateTimeout = window.setTimeout(() => {\n              this.indicatorX = false;\n              this.indicatorY = false;\n\n              this.stateTimeout = null;\n\n              if (this.interaction && (this.states.left || this.states.right)) {\n                this.allowPropagationX = true;\n              }\n\n              if (this.interaction && (this.states.top || this.states.bottom)) {\n                this.allowPropagationY = true;\n              }\n\n              this.cdRef.markForCheck();\n            }, 500);\n          }\n        }\n\n        this.cdRef.markForCheck();\n        this.cdRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.stateSub) {\n      this.stateSub.unsubscribe();\n    }\n\n    if (this.stateTimeout) {\n      window.clearTimeout(this.stateTimeout);\n    }\n  }\n\n  ngDoCheck() {\n    if (!this.disabled && this.autoPropagation && this.directiveRef) {\n      const element = this.directiveRef.elementRef.nativeElement;\n\n      this.usePropagationX = element.classList.contains('ps--active-x');\n\n      this.usePropagationY = element.classList.contains('ps--active-y');\n    }\n  }\n\n  private checkPropagation(event: any, deltaX: number, deltaY: number) {\n    this.interaction = true;\n\n    const scrollDirectionX = (deltaX < 0) ? -1 : 1;\n    const scrollDirectionY = (deltaY < 0) ? -1 : 1;\n\n    if ((this.usePropagationX && this.usePropagationY) ||\n        (this.usePropagationX && (!this.allowPropagationX ||\n        (this.scrollDirectionX !== scrollDirectionX))) ||\n        (this.usePropagationY && (!this.allowPropagationY ||\n        (this.scrollDirectionY !== scrollDirectionY))))\n    {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (!!deltaX) {\n      this.scrollDirectionX = scrollDirectionX;\n    }\n\n    if (!!deltaY) {\n      this.scrollDirectionY = scrollDirectionY;\n    }\n\n    this.stateUpdate.next('interaction');\n\n    this.cdRef.detectChanges();\n  }\n\n  public onWheelEvent(event: WheelEvent) {\n    if (!this.disabled && this.autoPropagation) {\n      const scrollDeltaX = event.deltaX;\n      const scrollDeltaY = event.deltaY;\n\n      this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\n    }\n  }\n\n  public onTouchEvent(event: TouchEvent) {\n    if (!this.disabled && this.autoPropagation) {\n      const scrollPositionX = event.touches[0].clientX;\n      const scrollPositionY = event.touches[0].clientY;\n\n      const scrollDeltaX = scrollPositionX - this.scrollPositionX;\n      const scrollDeltaY = scrollPositionY - this.scrollPositionY;\n\n      this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\n\n      this.scrollPositionX = scrollPositionX;\n      this.scrollPositionY = scrollPositionY;\n    }\n  }\n\n  public onScrollEvent(event: Event, state: string) {\n    if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\n      this.stateUpdate.next(state);\n    }\n  }\n}\n"]}